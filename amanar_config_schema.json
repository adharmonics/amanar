{
  "items": {
    "required": [
      "configurables",
      "vault_path",
      "vault_role"
    ],
    "type": "object",
    "properties": {
      "vault_path": {
        "description": "The path representing the datastore in the Vault. This is equivalent to $VAULT_PATH in the CLI command `vault read $VAULT_PATH/creds/$VAULT_ROLE`.",
        "type": "string"
      },
      "vault_role": {
        "description": "The role representing the permissions that are sought to the Vault datastore. This is equivalent to $VAULT_ROLE in the CLI command `vault read $VAULT_PATH/creds/$VAULT_ROLE`.",
        "type": "string"
      },
      "configurables": {
        "type": "object",
        "properties": {
          "intellij_datasources": {
            "type": "array",
            "description": "Allows IntelliJ datasource usernames and passwords to be changed. Most useful for DataGrip and databases within IntelliJ Ultimate.",
            "items": {
              "type": "object",
              "required": [
                "database_uuid",
                "datasource_file_path"
              ],
              "properties": {
                "datasource_file_path": {
                  "description": "The path to IntelliJ data sources file. The file is typically called dataSources.local.xml.",
                  "type": "string"
                },
                "trusted_applications": {
                  "description": "If the Keychain entries you want to create already exist, this is unnecessary. A list of full paths to applications to allow the Keychain to trust to reduce the number of permissions prompts. This path should end in .app.",
                  "items": {
                    "type": "string"
                  },
                  "type": "array"
                },
                "database_uuid": {
                  "description": "The IntelliJ UUID for the database you want to update. You can find this by examining the dataSources.local.xml file.",
                  "type": "string"
                }
              }
            }
          },
          "intellij_run_configurations": {
            "type": "array",
            "description": "Allows changes to database access credentials within IntelliJ run configurations.",
            "items": {
              "type": "object",
              "required": [
                "environment_variable",
                "run_configurations_folder_path",
                "database_host"
              ],
              "properties": {
                "run_configurations_folder_path": {
                  "description": "A directory containing all IntelliJ run configurations to be examined. Usually located in .idea/runConfigurations. Run configurations may need to be shared before becoming visible in this folder.",
                  "type": "string"
                },
                "environment_variable": {
                  "description": "The environment variable in the run configuration under which the database connection",
                  "type": "string"
                },
                "database_host": {
                  "description": "The username and password for the URL will only be updated if the host of URL in the environment variable matches this string.",
                  "type": "string"
                }
              }
            }
          },
          "querious2_datasources": {
            "type": "array",
            "description": "Allows changes to database access credentials stored in a Querious 2 SQLite database.",
            "items": {
              "type": "object",
              "required": [
                "querious2_sqlite_path",
                "database_uuid"
              ],
              "properties": {
                "querious2_sqlite_path": {
                  "description": "Path to the SQLite database in which Querious 2 stores its data. The file is typically called Connections.sqlite.",
                  "type": "string"
                },
                "database_uuid": {
                  "description": "The unique identifier for the Querious database to update. Can be found by looking in the SQLite database.",
                  "type": "string"
                }
              }
            }
          },
          "sequel_pro_datasources": {
            "type": "array",
            "description": "Allows changes to database access credentials for Sequel Pro plists.",
            "items": {
              "type": "object",
              "required": [
                "sequel_pro_plist_path",
                "database_uuid"
              ],
              "properties": {
                "sequel_pro_plist_path": {
                  "description": "Path to the plist in which Sequel Pro stores its data. The file is typically called Favorites.plist",
                  "type": "string"
                },
                "database_uuid": {
                  "description": "The unique identifier for the Sequel Pro database to update. Can be found by looking in the plist.",
                  "type": "string"
                }
              }
            }
          },
          "postico_datasources": {
            "type": "array",
            "description": "Allows changes to database access credentials stored in a Postico SQLite database.",
            "items": {
              "type": "object",
              "required": [
                "postico_sqlite_path",
                "database_uuid"
              ],
              "properties": {
                "postico_sqlite_path": {
                  "description": "Path to the SQLite database in which Postico stores its data. The file is typically called ConnectionFavorites.db",
                  "type": "string"
                },
                "database_uuid": {
                  "description": "The unique identifier for the Postico database to update. Can be found by looking in the SQLite database.",
                  "type": "string"
                }
              }
            }
          },
          "shell_datasources": {
            "description": "Allows a file to be generated in a shell script that contains exports of environment variables containing the new credentials.",
            "type": "array",
            "items": {
              "type": "object",
              "required": [
                "language",
                "username_variable",
                "password_variable",
                "script_path"
              ],
              "properties": {
                "language": {
                  "description": "The shell scripting language to generate the shell script in.",
                  "type": "string",
                  "enum": ["bash"]
                },
                "script_path": {
                  "description": "The path the shell script should be generated to.",
                  "type": "string"
                },
                "username_variable": {
                  "description": "The name of the environment variable that should contain the username",
                  "type": "string"
                },
                "password_variable": {
                  "description": "The name of the environment variable that should contain the password",
                  "type": "string"
                }
              }
            }
          }
        }
      }
    }
  },
  "type": "array"
}
